<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <title>Una nit màgica de halloween</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap');
	@import url('https://fonts.googleapis.com/css2?family=Creepster&family=Nosifer&family=Butcherman&display=swap');
		
    body {
      font-family: 'Creepster', cursive;
      background-color: #fff8e7;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      overflow-y: auto;
    }

    .page {
      display: none;
      width: 100%;
      min-height: 100vh;
      position: relative;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding: 1rem;
      box-sizing: border-box;
    }
    .page.active {
      display: flex;
    }

    .content-wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: flex-start;
      
      width: 100%;
      max-width: 100%;
      height: auto;
    }

    .box-container {
      background-color: #FFA500;
      border-radius: 1.5rem;
      position: relative;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      width: 100%;
      max-width: 500px;
      /* Alto proporcional para mantener cuadrado */
      aspect-ratio: 1 / 1;
      flex-shrink: 0;
      display: flex;
      align-items: center;
    }

    .text-side {
	  font-family:Creepster;
      width: 100%;
      height: 100%;
      padding: 1.5rem;
      box-sizing: border-box;
      color: white;
      font-size: 1.2rem;
      line-height: 1.5;
      overflow-y: auto;
      user-select: none;
	  letter-spacing: 1px; /* separa las letras, prueba con 1px o 3px según te guste */
	  line-height: 1.1;
	  text-align: justify
    }

    .effects-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 10;
      overflow: visible;
    }

    .image-container {
      width: 50vw;
      max-width: 500px;
      flex-shrink: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }
	
    .image-container img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      border-radius: 1rem;
      user-select: none;
    }

    /* Hojas animación */
    .leaf {
      position: absolute;
      width: 40px;
      height: 40px;
      background-image: url('leaf.png');
      background-size: contain;
      background-repeat: no-repeat;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
      will-change: transform;
      opacity: 0.9;
    }
    @keyframes fall {
      0% {
        transform: translateY(-50px) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(120vh) rotate(360deg);
        opacity: 0;
      }
    }

    /* Halloween flotante */
    .halloween-item {
      position: absolute;
      width: 40px;
      height: 40px;
      background-size: contain;
      background-repeat: repeat;
      will-change: transform;
      opacity: 0.50;
    }
    .bat { background-image: url('bat.png'); }
    .ghost { background-image: url('ghost.png'); }
    .pumpkin { background-image: url('pumpkin.png'); }

    @keyframes floatZigzag {
      0%   { transform: translate(0, 0); }
      25%  { transform: translate(20px, 10px); }
      50%  { transform: translate(-20px, 20px); }
      75%  { transform: translate(20px, 10px); }
      100% { transform: translate(0, 0); }
    }

    .nav-buttons {
      margin-top: 1rem;
      display: flex;
      justify-content: space-between;
      width: 100%;
      max-width: 400px;
      user-select: none;
    }
    button {
      transition: background-color 0.3s ease;
    }

    /* Ajustes extra para móviles */
    @media (max-width: 600px) {
      .box-container {
        width: 90vw;
        max-width: 300px;
      }
      .image-container {
        width: 90vw;
        max-width: 300px;
      }
      .text-side {
        font-size: 0.9rem;
        padding: 1rem;
      }
    }
  </style>
</head>
<body>

  <!-- Portada -->
  <div id="page0" class="page active">
    <!--<h1 class="text-3xl md:text-5xl text-orange-600 font-bold mb-4 text-center">UNA NIT MÀGICA DE HALLOWEEN</h1>-->
    <img src="portada.png" alt="Portada" class="w-2/3 max-w-md rounded-lg shadow-md mb-4" />
    <button onclick="nextPage()" class="px-5 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600">Començar</button>
  </div>

  <!-- Página 1 -->
  <div id="page1" class="page">
    <div class="content-wrapper">
      <div class="box-container">
        <div class="text-side">
        <p>
  Era una vesprada de tardor, i les fulles ballaven amb el vent.<br><br>
</p>

<p>
  En una casa amb olor a carabassa torrada, 
  <strong>Alba</strong> estava molt ocupada pintant ratpenats a la finestra.
</p><br><br>

<p>
  Portava la seua camiseta preferida de Stitch, 
  tacada amb puntets de pintura de tots els colors.
</p><br><br>

<p>
  Al seu costat gatejava la seua cosineta <strong>Dàlia</strong>, 
  una bebé que arrossegava la seua carabasseta de tela buscant caramels amagats.
</p><br><br>

<p>
  —Mira, <strong>Dàlia</strong>! —va dir <strong>Alba</strong>—. 
  Este ratpenat m’ha quedat genial.
</p><br><br>

<p>
  Però just en acabar l’última pinzellada…
</p>

        </div>
        <div class="effects-container" id="effects1"></div>
      </div>
      <div class="image-container">
        <img src="1.png" alt="Imagen 1" draggable="false" />
      </div>
    </div>
    <div class="nav-buttons">
      <button onclick="prevPage()" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">← Torna</button>
      <button onclick="nextPage()" class="px-3 py-1 bg-orange-500 text-white rounded hover:bg-orange-600">Següent→</button>
    </div>
  </div>

  <!-- Página 2 -->
  <div id="page2" class="page">
    <div class="content-wrapper">
      <div class="box-container">
        <div class="text-side">
          <p>
  el ratpenat va aletejar i va eixir volant per la finestra!<br><br>

  <strong>Dàlia</strong> va obrir els ulls com a plats.<br><br>

  —¡Buuuu! —balbucejava divertida mentre assenyalava el ratpenat que volava pel sostre.<br><br>

  <strong>Alba</strong> es va fregar els ulls.<br><br>

  —He fet jo això? —va murmurar sorpresa.<br><br>

  Va agafar un altre pinzell, va dibuixar una carabassa somrient… i la carabassa va cobrar vida i va començar a rodar pel terra rient!<br><br>

  De sobte, tota l’habitació es va omplir de pintures vives: fantasmes que ballaven, estreles que brillaven i gats que miolaven de mentida.
</p>

        </div>
        <div class="effects-container" id="effects2"></div>
      </div>
      <div class="image-container">
        <img src="2.png" alt="Imagen 2" draggable="false" />
      </div>
    </div>
    <div class="nav-buttons">
      <button onclick="prevPage()" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">← Torna</button>
      <button onclick="nextPage()" class="px-3 py-1 bg-orange-500 text-white rounded hover:bg-orange-600">Següent→</button>
    </div>
  </div>

  <!-- Página 3 -->
  <div id="page3" class="page">
    <div class="content-wrapper">
      <div class="box-container">
        <div class="text-side">
     <p>
  Al principi, <strong>Alba</strong> i <strong>Dàlia</strong> reien sense parar, fins que els ratpenats van començar a amagar els caramels de <strong>Dàlia</strong>.<br><br>

  —Eh! Torneu-los! —cridava <strong>Alba</strong> entre rialles.<br><br>

  Aleshores, <strong>Alba</strong> va tindre una idea: va pintar un gran arc de Sant Martí màgic en l’aire… i tots els dibuixos van tornar al seu lloc, deixant la casa més bonica que mai.
</p>


        </div>
        <!-- No hay efectos -->
      </div>
      <div class="image-container">
        <img src="3.png" alt="Imagen 3" draggable="false" />
      </div>
    </div>
    <div class="nav-buttons">
      <button onclick="prevPage()" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">← Torna</button>
      <button onclick="nextPage()" class="px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600">Següent→</button>
    </div>
  </div>

  <!-- Página 4 (nueva) -->
  <div id="page4" class="page">
    <div class="content-wrapper">
      <div class="box-container">
        <div class="text-side">
          <p>
  Quan el uouo i la ela van entrar, tot estava tranquil una altra vegada.<br><br>

  Només <strong>Dàlia</strong> tenia un secret dolç a les mans: un caramel brillant que el ratpenat li havia deixat de regal!<br><br>

  Aquella nit de Halloween, <strong>Alba</strong> va descobrir que tenia un superpoder amagat… el poder de donar vida a la seua imaginació.<br><br>

  I <strong>Dàlia</strong>, la seua xicoteta còmplice, va ser la primera en descobrir-ho.
</p>

        </div>
      </div>
      <div class="image-container">
        <img src="4.png" alt="Imagen 4" draggable="false"  />
      </div>
    </div>
    <div class="nav-buttons">
      <button onclick="prevPage()" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">← Torna</button>
      <button onclick="nextPage()" class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700">Final →</button>
    </div>
  </div>

  <!-- Página final -->
  <div id="page5" class="page">
    <h2 class="text-3xl md:text-5xl text-green-600 font-bold mb-4 text-center">Continuarà...</h2>
    <img src="fin.png" alt="Fin" class="w-2/3 max-w-md rounded-lg shadow-md mb-4" />
    <button onclick="goToPage(0)" class="px-5 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Torna'l a llegir</button>
  </div>

  <script>
    let currentPage = 0;
    const totalPages = 6;

    function showPage(idx) {
      for (let i = 0; i < totalPages; i++) {
        document.getElementById(`page${i}`).classList.remove('active');
      }
      document.getElementById(`page${idx}`).classList.add('active');
      currentPage = idx;

      if (idx === 1) generateLeaves(); else clearLeaves();
      if (idx === 2) generateHalloween(); else clearHalloween();
    }

    function nextPage() {
      if (currentPage < totalPages - 1) showPage(currentPage + 1);
    }
    function prevPage() {
      if (currentPage > 0) showPage(currentPage - 1);
    }
    function goToPage(idx) {
      showPage(idx);
    }

    // Hojas
    let leaves = [];
    function generateLeaves() {
      const container = document.getElementById('effects1');
      container.innerHTML = '';
      leaves = [];
      for (let i = 0; i < 30; i++) {
        const leaf = document.createElement('div');
        leaf.classList.add('leaf');
        leaf.style.left = (Math.random() * 80) + '%';
        leaf.style.top = (-50 - Math.random() * 200) + 'px';
        leaf.style.animationName = 'fall';
        leaf.style.animationDuration = (5 + Math.random() * 5) + 's';
        leaf.style.animationDelay = (Math.random() * 5) + 's';
        container.appendChild(leaf);
        leaves.push(leaf);
      }
    }
    function clearLeaves() {
      const c = document.getElementById('effects1');
      c.innerHTML = '';
      leaves = [];
    }

    // Halloween
    let halloweenItems = [];
    let halloweenFrame = null;
    const types = ['bat', 'ghost', 'pumpkin'];
    function generateHalloween() {
      const container = document.getElementById('effects2');
      container.innerHTML = '';
      halloweenItems = [];
      const perType = 5;
      for (let i = 0; i < types.length * perType; i++) {
        const type = types[i % types.length];
        const item = document.createElement('div');
        item.classList.add('halloween-item', type);
        const x0 = Math.random() * (container.clientWidth - 40);
        const y0 = Math.random() * (container.clientHeight - 40);
        item.style.left = x0 + 'px';
        item.style.top = y0 + 'px';
        item.style.animationName = 'floatZigzag';
        item.style.animationDuration = (4 + Math.random() * 4) + 's';
        item.style.animationIterationCount = 'infinite';
        item.style.animationTimingFunction = 'ease-in-out';
        container.appendChild(item);
        halloweenItems.push(item);
      }
    }
    function clearHalloween() {
      if (halloweenFrame !== null) cancelAnimationFrame(halloweenFrame);
      const c = document.getElementById('effects2');
      c.innerHTML = '';
      halloweenItems = [];
      halloweenFrame = null;
    }

    showPage(0);
  </script>

</body>
</html>
